{"version":3,"sources":["../../node_modules/lodash.debounce/index.js","utils/is-mobile.js","graphic.js","footer.js","main.js"],"names":["isMobile","android","navigator","userAgent","match","blackberry","ios","opera","windows","any","resize","setupStepper","steps","step0","step1","step2","step3","step4","step5","step6","step7","tapLeft","d3","select","on","currentStep","switchStep","console","log","event","stopPropagation","tapRight","tapDown","document","querySelector","scrollIntoView","behavior","entirePage","d","classed","style","transition","pause","duration","delay","currentTime","play","selectAll","filter","step_used","highlightAss","attr","tapBack","scriptLines","getElementsByClassName","x","innerHTML","replace","assOnlyScript","csv","then","setupStepperScript","datapoints","scriptContainer","append","data","enter","text","catch","error","setupScroller","json","setupAssLine","margin","top","right","bottom","left","height","window","innerHeight","width","innerWidth","svg","lineFunction","line","y","lineData","xPositionScale","scaleLinear","domain","range","citationData","citations","citationCounter","slice","citationDates","map","date","indexCounter","length","newDate","firstDate","lastDate","timeLine","yearLabelStart","yearLabelEnd","citationCircles","sliderContainer","citationContainer","slider","buildCitationTimeline","usageData","icebergnumber","overlaynumber","wordContainer","word","senseContainer","part_of_speech","definition","number_of_citations","Array","yearLabelText","min","max","buildIcebergTextChart","filename","icebergChart","citationsLengths","colorScale","scaleOrdinal","container","spans","sort","i","currentState","overlay","leftShape","rightShape","buildIcebergTextList","overlayHeight","ismo_example","init","fallbackData","image","url","hed","storyData","loadJS","src","cb","ref","getElementsByTagName","script","createElement","async","parentNode","insertBefore","onload","loadStories","request","XMLHttpRequest","v","Date","now","open","status","JSON","parse","responseText","onerror","send","createLink","recircHTML","location","href","html","includes","join","setupSocialJS","s","id","js","fjs","getElementById","$body","previousWidth","node","offsetWidth","graphic","setupStickyHeader","$header","$menu","$toggle","visible","addEventListener","footer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzXA;AAEA,IAAMA,QAAQ,GAAG;AAChBC,EAAAA,OAAO,EAAE;AAAA,WAAMC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAN;AAAA,GADO;AAGhBC,EAAAA,UAAU,EAAE;AAAA,WAAMH,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA,GAHI;AAKhBE,EAAAA,GAAG,EAAE;AAAA,WAAMJ,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAN;AAAA,GALW;AAOhBG,EAAAA,KAAK,EAAE;AAAA,WAAML,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA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","file":"main.js","sourceRoot":"../src/js","sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","// device sniffing for mobile\n\nconst isMobile = {\n\tandroid: () => navigator.userAgent.match(/Android/i),\n\n\tblackberry: () => navigator.userAgent.match(/BlackBerry/i),\n\n\tios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),\n\n\topera: () => navigator.userAgent.match(/Opera Mini/i),\n\n\twindows: () => navigator.userAgent.match(/IEMobile/i),\n\n\tany: () => (\n\t\tisMobile.android() ||\n\t\tisMobile.blackberry() ||\n\t\tisMobile.ios() ||\n\t\tisMobile.opera() ||\n\t\tisMobile.windows()\n\t),\n}\n\nexport default isMobile\n","/* global d3 */\nfunction resize() {}\n\n//----------------//\n\n//building the stepper\nfunction setupStepper() {\n\n  //array of step states\n  var steps = [\n    step0,\n    step1,\n    step2,\n    step3,\n    step4,\n    step5,\n    step6,\n    step7\n  ]\n\n  //define click events on right-left buttons\n  var tapLeft = d3.select('svg.tap--left')\n    .on('click', function () {\n      currentStep = currentStep - 1\n      switchStep(currentStep)\n      console.log('clicked')\n      d3.event.stopPropagation()\n    })\n  var tapRight = d3.select('svg.tap--right')\n    .on('click', function () {\n      currentStep = currentStep + 1\n      switchStep(currentStep)\n      console.log('clicked')\n    })\n  var tapDown = d3.select('svg.tap--final')\n    .on('click', function () {\n      currentStep = currentStep + 1\n      switchStep(currentStep)\n      console.log('clicked')\n      document.querySelector('.step').scrollIntoView({ behavior: 'smooth' })\n    })\n\n\n   // define each step\n  function step0() {\n    var entirePage = d3.select('.stepper')\n      .on('click', function (d) {\n      currentStep = currentStep + 1\n      console.log(currentStep)\n      switchStep(currentStep)\n    })\n\n    //activate container\n    d3.select('.stepper').classed('active',true)\n\n      //Activate stepper tap\n      d3.select(\".stepper__tap\").classed(\"active\", true)\n\n    //Activate first-button\n      d3.select(\".tap--first\").classed(\"active\", true)\n\n    //Deactivate right-left click buttons\n      d3.select(\".tap.tap--left\").classed(\"active\", false)\n        .style('opacity','0')\n      d3.select(\".tap.tap--right\").classed(\"active\", false)\n        .style('opacity','0')\n\n      d3.select(\".tap.tap--left\")\n        .transition()\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('opacity','0')\n        .style('pointer-events','none')\n      d3.select(\".tap.tap--right\")\n        .transition()\n        .style('left','55%')\n        .style('bottom','5%')\n        .style('opacity','0')\n\n\n      //stop the first video on clickback\n      d3.select('video.ismo.step1')['_groups'][0][0].pause()\n\n\n  }\n\n  function step1() {\n\n    //Remove full page click\n      d3.select('.stepper')\n        .on('click', null)\n\n    //Dectivate first-button\n      d3.select(\".tap--first\").classed(\"active\", false)\n\n    //Activate right-left click buttons\n      d3.select(\".tap.tap--left\").classed(\"active\", true)\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n\n      d3.select(\".tap.tap--left\")\n        .transition()\n        .duration(1000)\n        .style('opacity','1')\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('pointer-events','auto')\n      d3.select(\".tap.tap--right\")\n        .transition()\n        .duration(1000)\n        .style('opacity','1')\n        .style('left','55%')\n        .style('bottom','5%')\n\n    d3.select('.pause-overlay').transition()\n      .duration(1500)\n      .style('opacity',0)\n\n\n\n\n\n    // function splitSubtitle() {\n    // var subtitleWords = document.getElementsByClassName('subtitle')[0]\n    // subtitleWords.innerHTML = \"<span>\".concat(subtitleWords.innerHTML)\n    // console.log(subtitleWords.innerHTML)\n    // subtitleWords.innerHTML = subtitleWords.innerHTML.replace(/ /g,\"</span> <span>\")\n    // console.log(subtitleWords.innerHTML)\n    // subtitleWords.innerHTML = subtitleWords.innerHTML.slice(0,-7)\n    // d3.selectAll('.subtitle>span').classed('subtitle-word',true)\n\n    // splitSubtitle = function() {}\n\n    // }\n\n    // splitSubtitle()\n\n\n    d3.select('.subtitle').classed('active',true)\n    d3.select('.subtitle')\n      .style('opacity',0)\n    d3.select('.subtitle').transition()\n      .delay(400)\n      .duration(150)\n      .style('opacity',1)\n    // var subtitleHighlights = d3.selectAll('.subtitle-word')\n    // subtitleHighlights.transition()\n    //   .delay(400)\n    //   .duration(200)\n    //   .style('color','white')\n\n\n\n\n\n\n\n\n      //play the first video\n      d3.select('video.ismo.step1')['_groups'][0][0].currentTime = 0\n      d3.select('video.ismo.step1')['_groups'][0][0].play()\n\n  }\n\n  function step2() {\n   // //activate script\n   // d3.select('.script-container').classed(\"active\",true)\n   //  .transition()\n   //  .duration(1000)\n\n   //  //deselct active text on clickback\n   //  d3.selectAll('.script-line').classed(\"active\",false)\n   //  //select active text\n   //  d3.selectAll('.script-line')\n   //    .filter(function (d) {\n   //      return d.step_used == 'step2'\n   //    })\n   //    .classed('active',true)\n\n\n  //  //stop the first video\n  //  d3.select('video.ismo.step1')['_groups'][0][0].pause()\n  //  d3.select('video.ismo.step1')['_groups'][0][0].currentTime = 0\n  //  //play the second video\n  //  d3.select('video.ismo.step2')['_groups'][0][0].play()\n  // //pause the third video on clickback\n  //  d3.select('video.ismo.step3')['_groups'][0][0].pause()\n  //  d3.select('video.ismo.step3')['_groups'][0][0].currentTime = 0\n\n  //stop the first video\n   d3.select('video.ismo.step1')['_groups'][0][0].pause()\n   d3.select('.stepper__video.step1').classed('active',true)\n   // d3.select('video.ismo.step1')['_groups'][0][0].currentTime = 0\n\n   d3.select('.pause-overlay').transition()\n    .duration(1500)\n    .style('opacity',1)\n\n\n         //deactivate script on clickback\n   d3.select('.script-container').classed(\"active\",false)\n   d3.select('.subtitle').classed('active',false)\n   d3.select('.subtitle')\n    .style('opacity',0)\n\n    //deselect active text on clickback\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n    //stop the second video on clickback\n   d3.select('video.ismo.step3')['_groups'][0][0].pause()\n   d3.select('video.ismo.step3')['_groups'][0][0].currentTime = 0\n\n  }\n\n  function step3() {\n   //activate script\n   d3.select('.script-container').classed(\"active\",true)\n\n    //transition out overlay\n    d3.select('.pause-overlay').transition()\n    .duration(2000)\n    .style('opacity',0)\n\n    //deselct active text on clickback\n    d3.selectAll('.script-line').classed(\"active\",false)\n    //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step2'\n      })\n      .classed('active',true)\n\n\n\n   //play the second video\n   d3.select('video.ismo.step3')['_groups'][0][0].play()\n  //pause the third video on clickback\n   d3.select('video.ismo.step4')['_groups'][0][0].pause()\n   d3.select('video.ismo.step4')['_groups'][0][0].currentTime = 0\n\n  }\n\n  function step4() {\n\n    //stop the second video\n    d3.select('video.ismo.step3')['_groups'][0][0].pause()\n    d3.select('video.ismo.step3')['_groups'][0][0].currentTime = 0\n   //play the third video\n    d3.select('video.ismo.step4')['_groups'][0][0].play()\n    //pause the fourth video on clickback\n    d3.select('video.ismo.step5')['_groups'][0][0].pause()\n    d3.select('video.ismo.step5')['_groups'][0][0].currentTime = 0\n\n    //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n    //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step3'\n      })\n      .classed('active',true)\n\n    //reset text color on clickback\n      d3.selectAll('#ass-instance')\n        .transition()\n        .duration(1000)\n        .style('color','rgba(186,186,186,0.4)')\n  }\n\n\n  function step5() {\n\n    //stop the third video\n   d3.select('video.ismo.step4')['_groups'][0][0].pause()\n   d3.select('video.ismo.step4')['_groups'][0][0].currentTime = 0\n   //play the fourth video\n   d3.select('video.ismo.step5')['_groups'][0][0].play()\n   //pause the fifth video on clickback\n   d3.select('video.ismo.step6')['_groups'][0][0].pause()\n   d3.select('video.ismo.step6')['_groups'][0][0].currentTime = 0\n\n   //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n   //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step4'\n      })\n      .classed('active',true)\n\n    //highlight instances of ass\n    highlightAss()\n\n    //reset text color on clickback\n      d3.selectAll('#ass-instance')\n        .transition()\n        .duration(1000)\n        .style('color','#b2eafc')\n\n    //Reactivate right click buttons on clickback\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n       d3.select(\".tap.tap--left\").classed(\"active\", true)\n\n      //Move left tap to top corner\n\n    //Deactivate final click button on clickback\n      d3.select(\".tap.tap--final\").classed(\"active\", false)\n      d3.select(\".tap.tap--final\").transition()\n        .style('opacity','0')\n\n    //Move back right-left click buttons\n      d3.select(\".tap.tap--right\").transition()\n        .duration(1000)\n        .style('left','55%')\n        .style('bottom','5%')\n        .style('opacity','1')\n      d3.select('.tap.tap--left').transition()\n        .duration(1000)\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('opacity','1')\n\n  }\n\n  function step6() {\n\n    //stop the fourth video\n   d3.select('video.ismo.step5')['_groups'][0][0].pause()\n   d3.select('video.ismo.step5')['_groups'][0][0].currentTime = 0\n   //play the fifth video\n   d3.select('video.ismo.step6')['_groups'][0][0].play()\n\n   //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n   //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step5'\n      })\n      .classed('active',true)\n\n    //Move out right-left click buttons\n      d3.select(\".tap.tap--right\").transition()\n        .duration(1000)\n        .style('left','65%')\n        .style('bottom','20%')\n        .style('opacity','.6')\n      d3.select('.tap.tap--left').transition()\n        .duration(1000)\n        .style('right','65%')\n        .style('bottom','20%')\n        .style('opacity','.6')\n\n    //Activate final click button\n      d3.select(\".tap.tap--final\").classed(\"active\", true)\n\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1)\n        .style('opacity',0)\n\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1000)\n        .style('opacity',1)\n\n    //Dectivate clickback button on clickback\n      d3.select(\".tap.tap--back\").classed(\"active\", false)\n\n      //Reactivate left-right click on clickback\n      d3.select('.tap.tap--left').classed('active',true)\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n\n        //reactivate on clickback\n      d3.select('.stepper').classed('active',true)\n      d3.select('.stepper__graphics').classed('active',true)\n        .attr('display','none')\n      d3.select('.script-container')\n        .classed('active',true)\n\n      //deactivate scroller and stack on clickback\n      d3.select('.scroll').classed('active',false)\n      d3.select('.stack').classed('active',false)\n\n\n  }\n\n    function step7() {\n      //remove the stepper and activate the scroller\n      // d3.select('.stepper__graphics').classed('active',false)\n      //   .attr('display','none')\n      d3.select('.stepper').classed('active',false)\n      d3.select('.script-container')\n        .classed('active',false)\n      d3.select('.tap.tap--final')\n        .classed('active',false)\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1000)\n        .style('opacity',0)\n      d3.select('.scroll').classed('active',true)\n        .attr('display','inline')\n      d3.select('.stack').classed('active',true)\n      //deselect active text on clickback/clickthrough\n      d3.selectAll('.script-line').classed(\"active\",false)\n\n      //activate tap back button\n\n        var tapBack = d3.select('svg.tap--back')\n          .on('click', function () {\n            currentStep = currentStep - 1\n            switchStep(currentStep)\n            console.log('clicked')\n          })\n\n      d3.select('svg.tap--back')\n        .classed('active',true)\n\n      d3.select('svg.tap--back').transition()\n        .duration(1000)\n        .style('opacity',1)\n\n      //pause the fifth video\n      d3.select('video.ismo.step6')['_groups'][0][0].pause()\n\n      //deactivate leftright click button\n      d3.select('.tap.tap--left')\n        .classed('active',false)\n      d3.select('.tap.tap--right')\n        .classed('active',false)\n\n      d3.select('.tap.tap--left').transition()\n        .style('opacity','0')\n      d3.select('.tap.tap--right').transition()\n        .style('opacity','0')\n\n      // //allow all asses to peek out\n      // d3.select('#script-container')\n      //   .transition()\n      //   .duration(1000)\n      //   .style('overflow','visible')\n\n      // d3.selectAll('#ass-instance')\n      //   .transition()\n      //   .duration(1000)\n      //   .style('color','#333333')\n      //   .style('opacity',.1)\n\n\n  }\n  //end of step functions\n\n  //highlight asses function\n  function highlightAss() {\n      var scriptLines = document.getElementsByClassName('script-line')\n      var x\n      for (x of scriptLines) {\n        x.innerHTML = x.innerHTML.replace(/ass-berg/g,'<span id=\"ass-instance\">ass-berg</span>');\n        x.innerHTML = x.innerHTML.replace(/badass/g,'<span id=\"ass-instance\">badass</span>');\n        x.innerHTML = x.innerHTML.replace(/dumbass/g,'<span id=\"ass-instance\">dumbass</span>');\n        x.innerHTML = x.innerHTML.replace(/your ass/g,'<span id=\"ass-instance\">your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/Your ass/g,'<span id=\"ass-instance\">Your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/my ass/g,'<span id=\"ass-instance\">my ass</span>');\n        x.innerHTML = x.innerHTML.replace(/My ass/g,'<span id=\"ass-instance\">My ass</span>');\n        x.innerHTML = x.innerHTML.replace(/half-assed/g,'<span id=\"ass-instance\">half-assed</span>');\n        x.innerHTML = x.innerHTML.replace(/blue-ass/g,'<span id=\"ass-instance\">blue-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/long-ass/g,'<span id=\"ass-instance\">long-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/good-ass/g,'<span id=\"ass-instance\">good-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/grown-ass/g,'<span id=\"ass-instance\">grown-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/lazy-ass/g,'<span id=\"ass-instance\">lazy-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/piece of ass/g,'<span id=\"ass-instance\">piece of ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ ass\\./g,' <span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/“ass”/g,'“<span id=\"ass-instance\">ass</span>”');\n        x.innerHTML = x.innerHTML.replace(/“ass.”/g,'“<span id=\"ass-instance\">ass</span>.”');\n        x.innerHTML = x.innerHTML.replace(/ ass,/g,' <span id=\"ass-instance\">ass</span>,');\n        x.innerHTML = x.innerHTML.replace(/ ass /g,' <span id=\"ass-instance\">ass</span> ');\n      }\n      highlightAss = function(){}\n\n    }\n  //end of highlight asses function\n\n    //keep only asses function\n  function assOnlyScript() {\n      var scriptLines = document.getElementsByClassName('scroll-script-line')\n      var x\n      for (x of scriptLines) {\n        x.innerHTML = x.innerHTML.replace(/ass-berg/g,'<span id=\"ass-instance\">ass-berg</span>');\n        x.innerHTML = x.innerHTML.replace(/badass/g,'<span id=\"ass-instance\">badass</span>');\n        x.innerHTML = x.innerHTML.replace(/dumbass/g,'<span id=\"ass-instance\">dumbass</span>');\n        x.innerHTML = x.innerHTML.replace(/your ass/g,'<span id=\"ass-instance\">your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/Your ass/g,'<span id=\"ass-instance\">Your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/my ass/g,'<span id=\"ass-instance\">my ass</span>');\n        x.innerHTML = x.innerHTML.replace(/My ass/g,'<span id=\"ass-instance\">My ass</span>');\n        x.innerHTML = x.innerHTML.replace(/half-assed/g,'<span id=\"ass-instance\">half-assed</span>');\n        x.innerHTML = x.innerHTML.replace(/blue-ass/g,'<span id=\"ass-instance\">blue-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/long-ass/g,'<span id=\"ass-instance\">long-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/good-ass/g,'<span id=\"ass-instance\">good-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/grown-ass/g,'<span id=\"ass-instance\">grown-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/lazy-ass/g,'<span id=\"ass-instance\">lazy-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/piece of ass/g,'<span id=\"ass-instance\">piece of ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ ass\\./g,' <span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/“ass”/g,'“<span id=\"ass-instance\">ass</span>”');\n        x.innerHTML = x.innerHTML.replace(/“ass.”/g,'“<span id=\"ass-instance\">ass</span>.”');\n        x.innerHTML = x.innerHTML.replace(/ ass,/g,' <span id=\"ass-instance\">ass</span>,');\n        x.innerHTML = x.innerHTML.replace(/ ass /g,' <span id=\"ass-instance\">ass</span> ');\n      }\n      assOnlyScript = function(){}\n\n    }\n  //end of highlight asses function\n\n  //change step function\n  function switchStep(currentStep){\n      //activate the current step\n      d3.selectAll(\".stepper__annotation\").classed(\"active\", false);\n      d3.select(\".stepper__annotation.step\" + currentStep).classed(\"active\", true);\n      d3.selectAll(\".stepper__video\").classed(\"active\", false);\n      d3.select(\".stepper__video.step\" + currentStep).classed(\"active\", true);\n      d3.selectAll(\".stepper__intro\").classed(\"active\", false);\n      d3.select(\".stepper__intro.step\" + currentStep).classed(\"active\", true);\n      console.log((\"step\" + currentStep))\n      //console.log(steps[(\"step\" + currentStep)])\n\n      //run that step\n      steps[(currentStep)]()\n\n    }\n  //end of change step function\n\n  //initalize stepper\n  var currentStep = 0\n  switchStep(currentStep)\n\n//end of stepper function\n}\n\n//-------------//\n\n//define the data, run script function\nd3.csv('assets/data/ismo_script.csv').then(\n//begin script function\nfunction setupStepperScript(datapoints) {\n  console.log('running')\n  var scriptContainer = d3.select('.stepper__graphics')\n    .append('p')\n    .attr('class','script-container')\n\n  var scriptLines = scriptContainer.selectAll('span')\n    .data(datapoints)\n    .enter().append('span')\n    .attr('class','script-line')\n    .text(function (d){\n      return (d.text + \" \")\n})\n//end of script function\n}).catch(function(error){\n     // handle error\n  })\n//end of data read/script\n\n//begin scrolly function\nfunction setupScroller() {\n\n      //define the data, run function\n    d3.json('assets/data/ass_long_data.json').then(\n    //begin function\n    function setupAssLine(datapoints) {\n      console.log('running ass line')\n      console.log(datapoints)\n\n      //set up variables\n      const margin = { top: 20, right: 20, bottom: 20, left: 20 }\n      const height = (window.innerHeight - margin.top - margin.bottom) / 2\n      const width = window.innerWidth - margin.left - margin.right\n      var svg = d3.select('#graphic2')\n        .append('svg')\n        .attr('class','time-line')\n        .attr('width',width)\n        .attr('height',height-margin.bottom)\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      var lineFunction = d3.line()\n        .x(function(d) { return d.x; })\n        .y(function(d) { return d.y; })\n      var lineData = [ { \"x\": width*.1,   \"y\": height*.02},  { \"x\": width*.9,  \"y\": height*.02} ]\n\n      //set up scales\n      var xPositionScale = d3.scaleLinear()\n        .domain([1761,2000])\n        .range([width*.1,width*.9])\n\n      //filter data\n      var citationData = datapoints[186].citations\n      var x\n      var citationCounter = 0\n      for (x of citationData){\n        if (x['@first'] == 'yes')\n          {citationData = citationData.slice(citationCounter,)}\n        citationCounter = citationCounter + 1\n      }\n      console.log(citationData)\n\n      //grab just the dates\n        var citationDates = citationData.map(function (d) {return d.date})\n        var x\n        var indexCounter = 0\n          //remove extraneous years\n         for (x of citationDates) {\n          console.log(x.length)\n          if (x.length > 4) {\n            var newDate = x.slice(0,4)\n            citationDates[indexCounter] = newDate\n          }\n          else {}\n          indexCounter = indexCounter + 1\n\n        }\n        console.log(citationDates)\n\n        var firstDate = citationDates[0]\n        var lastDate = citationDates.slice(-1)[0]\n\n      //add the timeline\n      var timeLine = svg.append('path')\n          //.transition().duration(2000)\n          .attr('d',lineFunction(lineData))\n          .attr('stroke-width',2)\n          .attr('stroke','#333333')\n\n      //add axis labels\n\n      var yearLabelStart = svg.append('g')\n        .attr('transform','translate(' + width*.1 +','+ height*.06 + ')')\n        .append('text')\n          .text(firstDate)\n          .attr('class','year-label')\n\n      var yearLabelEnd = svg.append('g')\n        .attr('transform','translate(' + width*.9 +','+ height*.06 + ')')\n        .append('text')\n          .text(lastDate)\n          .attr('class','year-label')\n\n        //add circle for each citation\n        var citationCircles = svg.selectAll('circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',function (d) {\n              if (d.date.length >4)\n                {return  xPositionScale(d.date.slice(0,4))}\n              else\n                {return xPositionScale(d.date)}\n\n            })\n            .attr('cy',height*.02)\n            .attr('r',4)\n            .attr('opacity',.5)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)\n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n      //add a slider\n      var sliderContainer = d3.select('#graphic2').append('div')\n        .attr('class','slider-container')\n\n      //add the selected citation container\n      var citationContainer = d3.select('#graphic2').append('div')\n        .attr('class','citationContainer')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n        \n      var slider = sliderContainer.append('input')\n        .attr('type','range')\n        .attr('min',firstDate)\n        .attr('max',lastDate)\n        .attr('id','rangeSLider')\n        .attr('value',1761)\n        .attr('step',1)\n        .attr('class','slider')\n        .attr('dates',citationDates)\n        .attr('oninput','selectCitation(this.value)')\n        .attr('onstart','selectCitation(this.value)')\n\n//---------------------///\n\n    //end of function\n    }).catch(function(error){\n         // handle error\n      })\n      //end of data read/script\n\n    }\n//end of scrolly function\n\n//-----------------//\n\n//adding charts to stack\n\nfunction buildCitationTimeline(usageData,icebergnumber,overlaynumber) {\n      console.log('running ass line')\n      console.log(usageData)\n\n      //set up variables\n      const margin = { top: 20, right: 20, bottom: 20, left: 20 }\n      const height = window.innerHeight - margin.top - margin.bottom\n      const width = window.innerWidth - margin.left - margin.right\n\n      var wordContainer = d3.select(overlaynumber).append('div')\n        .attr('class','word-container')\n        .style('color', '#333333')\n        .text(usageData.word)\n\n\n      var senseContainer = d3.select(overlaynumber).append('div')\n        .attr('class','sense-container')\n        .text(usageData.part_of_speech + \": \" + usageData.definition)\n\n      var svg = d3.select(overlaynumber)\n        .append('svg')\n        .attr('class','time-line')\n        .attr('width',width)\n        .attr('height',height-margin.bottom)\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      var lineFunction = d3.line()\n        .x(function(d) { return d.x; })\n        .y(function(d) { return d.y; })\n      var lineData = [ { \"x\": width*.1,   \"y\": height*.2},  { \"x\": width*.9,  \"y\": height*.2} ]\n\n      //filter data and only do line if more than 1 citation\n      if (usageData.number_of_citations == 1)\n        {\n          var citationData = Array(usageData.citations)\n\n          //add circle for each citation\n        var citationCircles = svg.selectAll('.citation-circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',width/2)\n            .attr('class','citation-circle')\n            .attr('cy',height*.2)\n            .attr('r',4)\n            .attr('opacity',1)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)\n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n          if (citationData[0].date.length > 4)\n            {var yearLabelText = citationData[0].date.slice(0,4)}\n          else\n            {var yearLabelText = citationData[0].date}\n\n\n        var yearLabelStart = svg.append('g')\n          .attr('transform','translate(' + width*.5 +','+ height*.23 + ')')\n          .append('text')\n          .text(yearLabelText)\n          .attr('class','year-label')\n\n                //add the selected citation container\n      var citationContainer = d3.select(overlaynumber).append('div')\n        .attr('class','citationContainerIceberg')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n\n\n      }\n      else\n        {\n          var citationData = usageData.citations\n\n          var x\n          var citationCounter = 0\n          for (x of citationData){\n            if (x['@first'] == 'yes')\n              {citationData = citationData.slice(citationCounter,)}\n            citationCounter = citationCounter + 1\n          }\n\n          //grab just the dates\n          var citationDates = citationData.map(function (d) {return d.date})\n          var x\n          var indexCounter = 0\n            //remove extraneous years\n           for (x of citationDates) {\n            console.log(x.length)\n            if (x.length > 4) {\n              var newDate = x.slice(0,4)\n              citationDates[indexCounter] = newDate\n            }\n            else {}\n            indexCounter = indexCounter + 1\n\n          }\n\n          //set up scales\n      var xPositionScale = d3.scaleLinear()\n        .domain([d3.min(citationDates),d3.max(citationDates)])\n        .range([width*.1,width*.9])\n\n      //add the timeline\n      var timeLine = svg.append('path')\n          //.transition().duration(2000)\n          .attr('d',lineFunction(lineData))\n          .attr('stroke-width',2)\n          .attr('stroke','#333333')\n\n      //add axis labels\n\n      var yearLabelStart = svg.append('g')\n        .attr('transform','translate(' + width*.1 +','+ height*.23 + ')')\n        .append('text')\n          .text(d3.min(citationDates))\n          .attr('class','year-label')\n\n      var yearLabelEnd = svg.append('g')\n        .attr('transform','translate(' + width*.9 +','+ height*.23 + ')')\n        .append('text')\n          .text(d3.max(citationDates))\n          .attr('class','year-label')\n\n        //add circle for each citation\n        var citationCircles = svg.selectAll('.citation-circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',function (d) {\n              return xPositionScale(d.date)\n            })\n            .attr('class','citation-circle')\n            .attr('cy',height*.2)\n            .attr('r',4)\n            .attr('opacity',.5)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)\n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n      //add a slider\n      var sliderContainer = d3.select(overlaynumber).append('div')\n        .attr('class','slider-container')\n\n\n      var slider = sliderContainer.append('input')\n        .attr('type','range')\n        .attr('min',d3.min(citationDates))\n        .attr('max',d3.max(citationDates))\n        .attr('id','rangeSlider')\n        .attr('value',d3.min(citationDates))\n        .attr('step',1)\n        .attr('class','sliderIceberg')\n        .attr('dates',citationDates)\n        .attr('oninput','selectCitationIceberg(this.value)')\n        .attr('onstart','selectCitationIceberg(this.value)')\n\n      //add the selected citation container\n      var citationContainer = d3.select(overlaynumber).append('div')\n        .attr('class','citationContainerIceberg')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n\n\n\n//end of if/else\n      }\n\n//end of function\n}\n\n//---------------------///\n\nfunction buildIcebergTextChart(filename,icebergnumber,overlaynumber) {\n      //time to make some charts\n\n      //define the data, run function\n    d3.json(filename).then(\n    //begin function\n    function icebergChart(datapoints) {\n      var citationsLengths = datapoints.map(function (d) {return d.number_of_citations})\n      console.log(datapoints.length)\n\n\n      //set up scales\n      var colorScale = d3.scaleOrdinal()\n        .domain(['noun','compound','phrase','adjective','suffix','verb','adverb'])\n        .range(['#FABD21','#DB2CCA','#8633FF','#DB772C','#F24C3D','green','gray'])\n\n\n      var container = d3.select(icebergnumber)\n\n      //append span groups to svg\n      var spans = container.selectAll('span')\n        .data(datapoints)\n        .enter().append('span')\n        .sort(function(x, y){\n   return y.number_of_citations - x.number_of_citations\n})\n        .attr('class','iceberg-text')\n        .attr('opacity',.8)\n        .style('color', '#333333')\n        .text(function(d) {\n          return d.word + ' • '\n        })\n        .on('mouseover', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', 1);\n        })\n        .on('mouseout', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', .8);\n        })\n        .on('click', function (d,i) {\n          console.log('clicked')\n          var overlay = d3.select(overlaynumber)\n            .classed('active',true)\n            .on('click', d3.select(this).classed('active',false))\n          var usageData = d3.select(this)['_groups'][0][0]['__data__']\n          buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n        })\n\n       console.log(d3.select('#iceberg1').style('height'))\n\n      var leftShape = d3.select('#left-shape1')\n        .style('height','101em')\n        // .style('height','2000px')\n      var rightShape = d3.select('#right-shape1')\n        .style('height','101em')\n\n    //end of function\n    }).catch(function(error){\n         // handle error\n      })\n      //end of data read/script\n    }\n\nfunction buildIcebergTextList(filename,icebergnumber,overlaynumber) {\n      //time to make some charts\n\n      //define the data, run function\n    d3.json(filename).then(\n    //begin function\n    function icebergChart(datapoints) {\n      var overlayHeight = window.innerHeight\n\n      console.log(window.innerHeight)\n      console.log(overlaynumber)\n      console.log(d3.select(overlaynumber)['_groups'][0][0]['style'])\n      d3.select(overlaynumber).transition()\n        .style('height',(overlayHeight + 'px'))\n\n      var container = d3.select(icebergnumber)\n\n\n      //append circle groups to svg\n      var spans = container.selectAll('span')\n        .data(datapoints)\n        .enter().append('span')\n        .attr('class','usage-examples')\n        .style('color', '#333333')\n        .text(function(d,i) {\n          return (i+1) + '. ' + d.ismo_example\n        })\n        .on('mouseout', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', .8);\n        })\n        .on('click', function (d,i) {\n          console.log('clicked')\n          var overlay = d3.select(overlaynumber)\n            .classed('active',true)\n            .on('click', d3.select(this).classed('active',false))\n          var usageData = d3.select(this)['_groups'][0][0]['__data__']\n          buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n        })\n\n    //end of function\n    }).catch(function(error){\n         // handle error\n      })\n      //end of data read/script\n    }\n\n//run functions\nfunction init() {\n  console.log('Make something awesome!');\n  //Run the stepper\n  setupStepper()\n  //Run the scroller\n  setupScroller()\n  //Build charts\n  buildIcebergTextList('assets/data/ass_ismo_citations_final.json','#iceberg0','#overlay0')\n  buildIcebergTextChart('assets/data/ass_long_data.json','#iceberg1','#overlay1')\n  buildIcebergTextChart('assets/data/fuck_long_data.json','#iceberg2','#overlay2')\n  buildIcebergTextChart('assets/data/dog_long_data.json','#iceberg3','#overlay3')\n  buildIcebergTextChart('assets/data/shit_long_data.json','#iceberg4','#overlay4')\n\n}\n\n\n\nexport default { init, resize };\n","const fallbackData = [\n  {\n    image: '2018_02_stand-up',\n    url: '2018/02/stand-up',\n    hed: 'The Structure of Stand-Up Comedy',\n  },\n  {\n    image: '2018_04_birthday-paradox',\n    url: '2018/04/birthday-paradox',\n    hed: 'The Birthday Paradox Experiment',\n  },\n  {\n    image: '2018_11_boy-bands',\n    url: '2018/11/boy-bands',\n    hed: 'Internet Boy Band Database',\n  },\n  {\n    image: '2018_08_pockets',\n    url: '2018/08/pockets',\n    hed: 'Women’s Pockets are Inferior',\n  },\n];\n\nlet storyData = null;\n\nfunction loadJS(src, cb) {\n  const ref = document.getElementsByTagName('script')[0];\n  const script = document.createElement('script');\n  script.src = src;\n  script.async = true;\n  ref.parentNode.insertBefore(script, ref);\n\n  if (cb && typeof cb === 'function') {\n    script.onload = cb;\n  }\n\n  return script;\n}\n\nfunction loadStories(cb) {\n  const request = new XMLHttpRequest();\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n  request.open('GET', url, true);\n\n  request.onload = () => {\n    if (request.status >= 200 && request.status < 400) {\n      const data = JSON.parse(request.responseText);\n      cb(data);\n    } else cb(fallbackData);\n  };\n\n  request.onerror = () => cb(fallbackData);\n\n  request.send();\n}\n\nfunction createLink(d) {\n  return `\n\t<a class='footer-recirc__article' href='https://pudding.cool/${\n    d.url\n  }' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${\n      d.image\n    }.jpg' alt='${d.hed}'>\n\t\t<p class='article__headline'>${d.hed}</p>\n\t</a>\n\t`;\n}\n\nfunction recircHTML() {\n  const url = window.location.href;\n  const html = storyData\n    .filter(d => !url.includes(d.url))\n    .slice(0, 4)\n    .map(createLink)\n    .join('');\n\n  d3.select('.pudding-footer .footer-recirc__articles').html(html);\n}\n\nfunction setupSocialJS() {\n  // facebook\n  (function(d, s, id) {\n    let js;\n\n    const fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7';\n    fjs.parentNode.insertBefore(js, fjs);\n  })(document, 'script', 'facebook-jssdk');\n\n  loadJS('https://platform.twitter.com/widgets.js');\n}\n\nfunction init() {\n  loadStories(data => {\n    storyData = data;\n\n    recircHTML();\n    setupSocialJS();\n  });\n}\n\nexport default { init };\n","/* global d3 */\nimport debounce from 'lodash.debounce';\nimport isMobile from './utils/is-mobile';\nimport graphic from './graphic';\nimport footer from './footer';\n\nconst $body = d3.select('body');\nlet previousWidth = 0;\n\nfunction resize() {\n  // only do resize on width changes, not height\n  // (remove the conditional if you want to trigger on height change)\n  const width = $body.node().offsetWidth;\n  if (previousWidth !== width) {\n    previousWidth = width;\n    graphic.resize();\n  }\n}\n\nfunction setupStickyHeader() {\n  const $header = $body.select('header');\n  if ($header.classed('is-sticky')) {\n    const $menu = $body.select('.header__menu');\n    const $toggle = $body.select('.header__toggle');\n    $toggle.on('click', () => {\n      const visible = $menu.classed('is-visible');\n      $menu.classed('is-visible', !visible);\n      $toggle.classed('is-visible', !visible);\n    });\n  }\n}\n\nfunction init() {\n  // add mobile class to body tag\n  $body.classed('is-mobile', isMobile.any());\n  // setup resize event\n  window.addEventListener('resize', debounce(resize, 150));\n  // setup sticky header menu\n  // setupStickyHeader();\n  // kick off graphic code\n  graphic.init();\n  // load footer stories\n  footer.init();\n}\n\ninit();\n"]}