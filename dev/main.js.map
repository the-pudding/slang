{"version":3,"sources":["../../node_modules/lodash.debounce/index.js","utils/is-mobile.js","graphic.js","footer.js","main.js"],"names":["isMobile","android","navigator","userAgent","match","blackberry","ios","opera","windows","any","resize","setupStepper","steps","step0","step1","step2","step3","step4","step5","step6","tapLeft","d3","select","on","currentStep","switchStep","console","log","event","stopPropagation","tapRight","tapDown","document","querySelector","scrollIntoView","behavior","tapBack","entirePage","d","classed","style","transition","pause","duration","play","currentTime","selectAll","filter","step_used","highlightAss","circleUniques","attr","assOnlyScript","scriptLines","getElementsByClassName","x","innerHTML","replace","first_unique_usage","enter","append","position","left","top","csv","then","setupStepperScript","datapoints","scriptContainer","data","text","catch","error","setupScrollScript","scrollScriptContainer","scrollScriptLines","setupScroller","scrollSteps","scrollStep0","scrollStep1","scrollStep2","scrollStep3","scrollStep4","scrollStep5","scrollStep6","scrollStep7","chart","yPositionScale","scalePoint","domain","range","window","innerHeight","assLabel","remove","uniques","sort","y","usage_number","usage_example","json","setupAssLine","margin","right","bottom","height","width","innerWidth","svg","lineFunction","line","lineData","xPositionScale","scaleLinear","citationData","citations","citationCounter","slice","citationDates","map","date","indexCounter","length","newDate","firstDate","lastDate","timeLine","yearLabelStart","yearLabelEnd","citationCircles","sliderContainer","citationContainer","slider","main","scrolly","graphic","step","scroller","scrollama","handleResize","stepH","Math","floor","graphicHeight","graphicMarginTop","handleStepEnter","response","i","index","setupStickyfill","each","Stickyfill","add","init","setup","offset","debug","onStepEnter","addEventListener","buildCitationTimeline","usageData","icebergnumber","overlaynumber","colorScale","scaleOrdinal","number_of_citations","Array","yearLabelText","senseContainer","part_of_speech","definition","wordContainer","word","min","max","buildIcebergChart","filename","icebergChart","citationsLengths","clamp","simulation","forceSimulation","force","forceY","strength","forceX","forceCollide","radius","forceCenter","forceManyBody","tick","stop","circleGroups","usageTexts","parentNode","currentState","overlay","buildIcebergTextChart","container","spans","leftShape","rightShape","fallbackData","image","url","hed","storyData","loadJS","src","cb","ref","getElementsByTagName","script","createElement","async","insertBefore","onload","loadStories","request","XMLHttpRequest","v","Date","now","open","status","JSON","parse","responseText","onerror","send","createLink","recircHTML","location","href","html","includes","join","setupSocialJS","s","id","js","fjs","getElementById","$body","previousWidth","node","offsetWidth","setupStickyHeader","$header","$menu","$toggle","visible","footer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzXA;AAEA,IAAMA,QAAQ,GAAG;AAChBC,EAAAA,OAAO,EAAE;AAAA,WAAMC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAN;AAAA,GADO;AAGhBC,EAAAA,UAAU,EAAE;AAAA,WAAMH,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA,GAHI;AAKhBE,EAAAA,GAAG,EAAE;AAAA,WAAMJ,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAN;AAAA,GALW;AAOhBG,EAAAA,KAAK,EAAE;AAAA,WAAML,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA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","file":"main.js","sourceRoot":"../src/js","sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","// device sniffing for mobile\n\nconst isMobile = {\n\tandroid: () => navigator.userAgent.match(/Android/i),\n\n\tblackberry: () => navigator.userAgent.match(/BlackBerry/i),\n\n\tios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),\n\n\topera: () => navigator.userAgent.match(/Opera Mini/i),\n\n\twindows: () => navigator.userAgent.match(/IEMobile/i),\n\n\tany: () => (\n\t\tisMobile.android() ||\n\t\tisMobile.blackberry() ||\n\t\tisMobile.ios() ||\n\t\tisMobile.opera() ||\n\t\tisMobile.windows()\n\t),\n}\n\nexport default isMobile\n","/* global d3 */\nfunction resize() {}\n\n//----------------//\n\n//building the stepper\nfunction setupStepper() {\n\n  //array of step states\n  var steps = [\n    step0,\n    step1,\n    step2,\n    step3,\n    step4,\n    step5,\n    step6\n  ]\n\n  //define click events on right-left buttons\n  var tapLeft = d3.select('svg.tap--left')\n    .on('click', function () {\n      currentStep = currentStep - 1\n      switchStep(currentStep)\n      console.log('clicked')\n      d3.event.stopPropagation()\n    })\n  var tapRight = d3.select('svg.tap--right')\n    .on('click', function () {\n      currentStep = currentStep + 1\n      switchStep(currentStep)\n      console.log('clicked')\n    })\n  var tapDown = d3.select('svg.tap--final')\n    .on('click', function () {\n      currentStep = currentStep + 1\n      switchStep(currentStep)\n      console.log('clicked')\n      document.querySelector('.step').scrollIntoView({ behavior: 'smooth' })\n    })\n  var tapBack = d3.select('svg.tap--back')\n    .on('click', function () {\n      currentStep = currentStep - 1\n      switchStep(currentStep)\n      console.log('clicked')\n    })\n\n\n   // define each step\n  function step0() {\n    var entirePage = d3.select('.stepper')\n      .on('click', function (d) {\n      currentStep = currentStep + 1\n      console.log(currentStep)\n      switchStep(currentStep)\n    })\n\n    //activate container\n    d3.select('.stepper').classed('active',true)\n\n      //Activate stepper tap \n      d3.select(\".stepper__tap\").classed(\"active\", true)\n\n    //Activate first-button\n      d3.select(\".tap--first\").classed(\"active\", true)\n\n    //Deactivate right-left click buttons\n      d3.select(\".tap.tap--left\").classed(\"active\", false)\n        .style('opacity','0')\n      d3.select(\".tap.tap--right\").classed(\"active\", false)\n        .style('opacity','0')\n\n      d3.select(\".tap.tap--left\")\n        .transition()\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('opacity','0')\n        .style('pointer-events','none')\n      d3.select(\".tap.tap--right\")\n        .transition()\n        .style('left','55%')\n        .style('bottom','5%')\n        .style('opacity','0')\n\n\n      //stop the first video on clickback\n      d3.select('video.ismo.step1')['_groups'][0][0].pause()\n   \n    \n  }\n\n  function step1() {\n\n    //Remove full page click\n      d3.select('.stepper')\n        .on('click', null)\n\n    //Dectivate first-button\n      d3.select(\".tap--first\").classed(\"active\", false)\n\n    //Activate right-left click buttons\n      d3.select(\".tap.tap--left\").classed(\"active\", true)\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n\n      d3.select(\".tap.tap--left\")\n        .transition()\n        .duration(1000)\n        .style('opacity','1')\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('pointer-events','auto')\n      d3.select(\".tap.tap--right\")\n        .transition()\n        .duration(1000)\n        .style('opacity','1')\n        .style('left','55%')\n        .style('bottom','5%')\n        \n\n\n      //play the first video\n      d3.select('video.ismo.step1')['_groups'][0][0].play()\n\n      //pause the second video on clickback\n      d3.select('video.ismo.step2')['_groups'][0][0].pause()\n      d3.select('video.ismo.step2')['_groups'][0][0].currentTime = 0\n\n      //deactivate script on clickback\n   d3.select('.script-container').classed(\"active\",false)\n\n    //deselect active text on clickback\n    d3.selectAll('.script-line').classed(\"active\",false)\n   \n  }\n\n  function step2() {\n   //activate script \n   d3.select('.script-container').classed(\"active\",true)\n    .transition()\n    .duration(1000)\n\n    //deselct active text on clickback\n    d3.selectAll('.script-line').classed(\"active\",false)\n    //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step2'\n      })\n      .classed('active',true)\n\n    \n   //stop the first video\n   d3.select('video.ismo.step1')['_groups'][0][0].pause()\n   d3.select('video.ismo.step1')['_groups'][0][0].currentTime = 0\n   //play the second video\n   d3.select('video.ismo.step2')['_groups'][0][0].play()\n  //pause the third video on clickback\n   d3.select('video.ismo.step3')['_groups'][0][0].pause()\n   d3.select('video.ismo.step3')['_groups'][0][0].currentTime = 0\n\n   //highlight instances of ass\n    highlightAss()\n  }\n\n  function step3() {\n    \n    //stop the second video\n    d3.select('video.ismo.step2')['_groups'][0][0].pause()\n    d3.select('video.ismo.step2')['_groups'][0][0].currentTime = 0\n   //play the third video\n    d3.select('video.ismo.step3')['_groups'][0][0].play()\n    //pause the fourth video on clickback\n    d3.select('video.ismo.step4')['_groups'][0][0].pause()\n    d3.select('video.ismo.step4')['_groups'][0][0].currentTime = 0\n\n    //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n    //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step3'\n      })\n      .classed('active',true)\n  }\n  \n\n  function step4() {\n\n    //stop the third video\n   d3.select('video.ismo.step3')['_groups'][0][0].pause()\n   d3.select('video.ismo.step3')['_groups'][0][0].currentTime = 0\n   //play the fourth video\n   d3.select('video.ismo.step4')['_groups'][0][0].play()\n   //pause the fifth video on clickback\n   d3.select('video.ismo.step5')['_groups'][0][0].pause()\n   d3.select('video.ismo.step5')['_groups'][0][0].currentTime = 0\n\n   //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n   //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step4'\n      })\n      .classed('active',true)\n\n    //circle unique usages\n    circleUniques()\n\n    //Reactivate right click buttons on clickback\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n       d3.select(\".tap.tap--left\").classed(\"active\", true)\n\n      //Move left tap to top corner\n\n    //Deactivate final click button on clickback\n      d3.select(\".tap.tap--final\").classed(\"active\", false)\n      d3.select(\".tap.tap--final\").transition()\n        .style('opacity','0')\n\n    //Move back right-left click buttons\n      d3.select(\".tap.tap--right\").transition()\n        .duration(1000)\n        .style('left','55%')\n        .style('bottom','5%')\n        .style('opacity','1')\n      d3.select('.tap.tap--left').transition()\n        .duration(1000)\n        .style('right','55%')\n        .style('bottom','5%')\n        .style('opacity','1')\n   \n  }\n\n  function step5() {\n\n    //stop the fourth video\n   d3.select('video.ismo.step4')['_groups'][0][0].pause()\n   d3.select('video.ismo.step4')['_groups'][0][0].currentTime = 0\n   //play the fifth video\n   d3.select('video.ismo.step5')['_groups'][0][0].play()\n\n   //deselect active text on clickback/clickthrough\n    d3.selectAll('.script-line').classed(\"active\",false)\n\n   //select active text\n    d3.selectAll('.script-line')\n      .filter(function (d) {\n        return d.step_used == 'step5'\n      })\n      .classed('active',true)\n\n    //Move out right-left click buttons\n      d3.select(\".tap.tap--right\").transition()\n        .duration(1000)\n        .style('left','65%')\n        .style('bottom','20%')\n        .style('opacity','.6')\n      d3.select('.tap.tap--left').transition()\n        .duration(1000)\n        .style('right','65%')\n        .style('bottom','20%')\n        .style('opacity','.6')\n\n    //Activate final click button\n      d3.select(\".tap.tap--final\").classed(\"active\", true)\n\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1)\n        .style('opacity',0)\n\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1000)\n        .style('opacity',1)\n    \n    //Dectivate clickback button on clickback\n      d3.select(\".tap.tap--back\").classed(\"active\", false)\n\n      //Reactivate left-right click on clickback\n      d3.select('.tap.tap--left').classed('active',true)\n      d3.select(\".tap.tap--right\").classed(\"active\", true)\n\n\n      //hide asses on clickback\n      d3.select('#script-container')\n        .transition()\n        .duration(1000)\n        .style('overflow','hidden')\n\n        //reactivate on clickback\n      d3.select('.stepper__graphics').classed('active',true)\n        .attr('display','none')\n      d3.select('.script-container')\n        .classed('active',true)\n\n      //deactivate scroller on clickback\n      d3.select('#scroll').classed('active',false)\n\n      //reset text color on clickback\n      d3.selectAll('#ass-instance')\n        .transition()\n        .duration(1000)\n        .style('color','#b2eafc')\n\n\n  }\n\n    function step6() {\n      //remove the stepper and activate the scroller\n      d3.select('.stepper__graphics').classed('active',false)\n        .attr('display','none')\n      d3.select('.script-container')\n        .classed('active',false)\n      d3.select('.tap.tap--final')\n        .classed('active',false)\n      d3.select(\".tap.tap--final\").transition()\n        .duration(1000)\n        .style('opacity',0)\n      d3.select('#scroll').classed('active',true)\n        .attr('display','inline')\n      //deselect active text on clickback/clickthrough\n      d3.selectAll('.script-line').classed(\"active\",false)\n\n      //pause the fifth video\n      d3.select('video.ismo.step5')['_groups'][0][0].pause()\n\n      //keep only asses moving into scroll\n      assOnlyScript()\n\n      //activate tap back button\n      d3.select('.tap.tap--back')\n        .classed('active',true)\n\n      //deactivate leftright click button\n      d3.select('.tap.tap--left')\n        .classed('active',false)\n      d3.select('.tap.tap--right')\n        .classed('active',false)\n\n      d3.select('.tap.tap--left').transition()\n        .style('opacity','0')\n      d3.select('.tap.tap--right').transition()\n        .style('opacity','0')\n\n      //allow all asses to peek out\n      d3.select('#script-container')\n        .transition()\n        .duration(1000)\n        .style('overflow','visible')\n\n      d3.selectAll('#ass-instance')\n        .transition()\n        .duration(1000)\n        .style('color','#333333')\n\n   \n  }\n  //end of step functions\n\n  //highlight asses function\n  function highlightAss() {\n      var scriptLines = document.getElementsByClassName('script-line')\n      var x\n      for (x of scriptLines) {\n        x.innerHTML = x.innerHTML.replace(/ass-berg/g,'<span id=\"ass-instance\">ass-berg</span>');\n        x.innerHTML = x.innerHTML.replace(/badass/g,'<span id=\"ass-instance\">badass</span>');\n        x.innerHTML = x.innerHTML.replace(/dumbass/g,'<span id=\"ass-instance\">dumbass</span>');\n        x.innerHTML = x.innerHTML.replace(/your ass/g,'<span id=\"ass-instance\">your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/Your ass/g,'<span id=\"ass-instance\">Your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/my ass/g,'<span id=\"ass-instance\">my ass</span>');\n        x.innerHTML = x.innerHTML.replace(/My ass/g,'<span id=\"ass-instance\">My ass</span>');\n        x.innerHTML = x.innerHTML.replace(/half-assed/g,'<span id=\"ass-instance\">half-assed</span>');\n        x.innerHTML = x.innerHTML.replace(/blue-ass/g,'<span id=\"ass-instance\">blue-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/long-ass/g,'<span id=\"ass-instance\">long-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/good-ass/g,'<span id=\"ass-instance\">good-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/grown-ass/g,'<span id=\"ass-instance\">grown-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/lazy-ass/g,'<span id=\"ass-instance\">lazy-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/piece of ass/g,'<span id=\"ass-instance\">piece of ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ ass\\./g,' <span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/ass/g,'<span id=\"ass-instance\">ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ass./g,'<span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/ ass,/g,' <span id=\"ass-instance\">ass</span>,');\n        x.innerHTML = x.innerHTML.replace(/ ass /g,' <span id=\"ass-instance\">ass</span> ');\n      }\n      highlightAss = function(){}\n        \n    }\n  //end of highlight asses function\n\n    //keep only asses function\n  function assOnlyScript() {\n      var scriptLines = document.getElementsByClassName('scroll-script-line')\n      var x\n      for (x of scriptLines) {\n        x.innerHTML = x.innerHTML.replace(/ass-berg/g,'<span id=\"ass-instance\">ass-berg</span>');\n        x.innerHTML = x.innerHTML.replace(/badass/g,'<span id=\"ass-instance\">badass</span>');\n        x.innerHTML = x.innerHTML.replace(/dumbass/g,'<span id=\"ass-instance\">dumbass</span>');\n        x.innerHTML = x.innerHTML.replace(/your ass/g,'<span id=\"ass-instance\">your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/Your ass/g,'<span id=\"ass-instance\">Your ass</span>');\n        x.innerHTML = x.innerHTML.replace(/my ass/g,'<span id=\"ass-instance\">my ass</span>');\n        x.innerHTML = x.innerHTML.replace(/My ass/g,'<span id=\"ass-instance\">My ass</span>');\n        x.innerHTML = x.innerHTML.replace(/half-assed/g,'<span id=\"ass-instance\">half-assed</span>');\n        x.innerHTML = x.innerHTML.replace(/blue-ass/g,'<span id=\"ass-instance\">blue-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/long-ass/g,'<span id=\"ass-instance\">long-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/good-ass/g,'<span id=\"ass-instance\">good-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/grown-ass/g,'<span id=\"ass-instance\">grown-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/lazy-ass/g,'<span id=\"ass-instance\">lazy-ass</span>');\n        x.innerHTML = x.innerHTML.replace(/piece of ass/g,'<span id=\"ass-instance\">piece of ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ ass\\./g,' <span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/ass/g,'<span id=\"ass-instance\">ass</span>');\n        x.innerHTML = x.innerHTML.replace(/ass./g,'<span id=\"ass-instance\">ass</span>.');\n        x.innerHTML = x.innerHTML.replace(/ ass,/g,' <span id=\"ass-instance\">ass</span>,');\n        x.innerHTML = x.innerHTML.replace(/ ass /g,' <span id=\"ass-instance\">ass</span> ');\n      }\n      assOnlyScript = function(){}\n        \n    }\n  //end of highlight asses function\n\n  //circle unique usages function\n  function circleUniques() {\n    console.log('running circles')\n      var scriptLines = d3.selectAll('.script-line')\n      .filter (function (d) {\n        return d.first_unique_usage == 'TRUE'\n      })\n      .enter()\n      .append('circle')\n        .attr('stroke','D1a72a')\n        .attr('fill','none')\n        .attr('r',3)\n        .attr('cx', function(d) {\n          return select(this).position().left\n        })\n        .attr('cy', function(d) {\n          return select(this).position().top\n        })  \n    }\n  //end of circleunique usages function\n\n  //change step function\n  function switchStep(currentStep){\n      //activate the current step\n      d3.selectAll(\".stepper__annotation\").classed(\"active\", false);\n      d3.select(\".stepper__annotation.step\" + currentStep).classed(\"active\", true);\n      d3.selectAll(\".stepper__video\").classed(\"active\", false);\n      d3.select(\".stepper__video.step\" + currentStep).classed(\"active\", true);\n      d3.selectAll(\".stepper__intro\").classed(\"active\", false);\n      d3.select(\".stepper__intro.step\" + currentStep).classed(\"active\", true);\n      console.log((\"step\" + currentStep))\n      //console.log(steps[(\"step\" + currentStep)])\n      \n      //run that step\n      steps[(currentStep)]()\n  \n    }\n  //end of change step function\n\n  //initalize stepper\n  var currentStep = 0\n  switchStep(currentStep)\n\n//end of stepper function\n}\n\n//-------------//\n\n//define the data, run script function\nd3.csv('assets/data/ismo_script.csv').then(\n//begin script function\nfunction setupStepperScript(datapoints) {\n  console.log('running')\n  var scriptContainer = d3.select('.stepper__graphics')\n    .append('p')\n    .attr('class','script-container')\n\n  var scriptLines = scriptContainer.selectAll('span')\n    .data(datapoints)\n    .enter().append('span')\n    .attr('class','script-line')\n    .text(function (d){\n      return (d.text + \" \")\n}) \n//end of script function\n}).catch(function(error){\n     // handle error   \n  })\n//end of data read/script\n\n//----------------//\n\n//define the data, run script function\nd3.csv('assets/data/ismo_script.csv').then(\n//begin script function\nfunction setupScrollScript(datapoints) {\n  console.log('running')\n  var scrollScriptContainer = d3.select('.scroll__graphic')\n    .append('p')\n    .attr('id','script-container')\n    .attr('class','chart')\n\n  var scrollScriptLines = scrollScriptContainer.selectAll('span')\n    .data(datapoints)\n    .enter().append('span')\n    .attr('class','scroll-script-line')\n    .text(function (d){\n      return (d.text + \" \")\n}) \n//end of script function\n}).catch(function(error){\n     // handle error   \n  })\n//end of data read/script\n\n//----------------//\n\n//begin scrolly function\nfunction setupScroller() {\n\n    //array of step states\n    var scrollSteps = [\n      scrollStep0,\n      scrollStep1,\n      scrollStep2,\n      scrollStep3,\n      scrollStep4,\n      scrollStep5,\n      scrollStep6,\n      scrollStep7\n    ]\n\n    //define step functions\n    function scrollStep0() {\n\n    }\n\n    function scrollStep1() {\n      // d3.select('#scroll').on('click',alert('hey1'))\n\n\n    }\n\n    function scrollStep2() {\n\n\n      //on scrollback\n      d3.select('.ass-label').classed('active',false)\n      d3.selectAll('.usage-examples').classed('active',false)\n\n      d3.selectAll('.scroll-script-line')\n        .transition()\n        .duration(1000)\n        .style('opacity',1)\n        .style('display','inline')\n\n      var chart = d3.select('.chart')\n        // .style('top','35%')\n\n    }\n\n    function scrollStep3() {\n      var yPositionScale = d3.scalePoint()\n        .domain(['1','2','3','4','5','6','7','8','9','10'])\n        .range([0,window.innerHeight*.75])\n\n            //add in word label 'ass'\n      var assLabel = d3.select('.ass-label').classed('active',true)\n      d3.select('.ass-label')\n        .style('opacity',0)\n\n      d3.select('.ass-label').transition()\n        .duration(1000)\n        .style('opacity',1)\n\n      d3.selectAll('.scroll-script-line')\n        .style('opacity',1)\n\n\n      var scriptLines = d3.selectAll('.scroll-script-line')\n        .transition()\n        .duration(1000)\n        .style('opacity',0)\n        .style('display','none')\n\n        //on scrollback\n        d3.selectAll('.usage-examples').remove()\n        \n\n        //define the data, run script function\n        d3.csv('assets/data/ismo_script.csv').then(\n        //begin script function\n        function setupScrollScript(datapoints) {\n\n          console.log('yeeee')\n          var uniques = d3.select('#script-container').selectAll('.usage-examples')\n            .data(datapoints)\n            .enter().append('span')\n            .sort(function(x, y){\n           return x.usage_number - y.usage_number\n        })\n            .filter(function (d) {\n            return d.first_unique_usage == 'TRUE'\n          })\n            .text(function (d){\n          return d.usage_number + '. ' + d.usage_example\n        }) \n            .attr('id', function (d) {\n              return 'usage' + d.usage_number\n            })\n            .attr('class','usage-examples')\n            .classed('active',true)\n      \n        //end of script function\n        }).catch(function(error){\n             // handle error   \n          })\n        //end of data read/script\n\n      d3.selectAll('.usage-examples')\n        .style('opacity',0)\n\n      d3.selectAll('.usage-examples').transition()\n        .duration(1000)\n        .style('opacity',1)\n\n\n    }\n\n    function scrollStep4() {\n      //show only first usage\n      d3.selectAll('.usage-examples').classed('active',false)\n      d3.select('.usage-examples#usage1').classed('active',true)\n\n      //on clickback\n      d3.select('.time-line')\n        .transition()\n        .duration(1000)\n        .attr('opacity',0)\n        .remove()\n      d3.select('.slider-container')\n        .transition()\n        .duration(1000)\n        .attr('opacity',0)\n        .remove()\n      d3.select('.citationContainer')\n        .transition()\n        .duration(1000)\n        .attr('opacity',0)\n        .remove()\n\n\n    }\n\n    function scrollStep5() {\n\n      //on clickback\n\n      d3.selectAll('.usage-examples').classed('active',false)\n      d3.select('.usage-examples#usage1').classed('active',true)\n      d3.select('.usage-examples#usage1')\n        .style('background-color','transparent')\n\n      //on clickback deactivate stack section\n      d3.select('.stack').classed('active',false)\n\n\n      //define the data, run function\n    d3.json('assets/data/ass_long_data.json').then(\n    //begin function\n    function setupAssLine(datapoints) {\n      console.log('running ass line')\n      console.log(datapoints)\n\n      //set up variables\n      const margin = { top: 20, right: 20, bottom: 20, left: 20 }\n      const height = window.innerHeight - margin.top - margin.bottom\n      const width = window.innerWidth - margin.left - margin.right\n      var svg = d3.select('.scroll__graphic')\n        .append('svg')\n        .attr('class','time-line')\n        .attr('width',width)\n        .attr('height',height-margin.bottom)\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      var lineFunction = d3.line()\n        .x(function(d) { return d.x; })\n        .y(function(d) { return d.y; })\n      var lineData = [ { \"x\": width*.1,   \"y\": height*.2},  { \"x\": width*.9,  \"y\": height*.2} ]\n\n      //set up scales\n      var xPositionScale = d3.scaleLinear()\n        .domain([1761,2000])\n        .range([width*.1,width*.9])\n\n      //filter data\n      var citationData = datapoints[186].citations\n      var x \n      var citationCounter = 0\n      for (x of citationData){\n        if (x['@first'] == 'yes')\n          {citationData = citationData.slice(citationCounter,)}\n        citationCounter = citationCounter + 1\n      }\n      console.log(citationData)\n\n      //grab just the dates\n        var citationDates = citationData.map(function (d) {return d.date})\n        var x\n        var indexCounter = 0\n          //remove extraneous years\n         for (x of citationDates) {\n          console.log(x.length)\n          if (x.length > 4) {\n            var newDate = x.slice(0,4)\n            citationDates[indexCounter] = newDate\n          }\n          else {}\n          indexCounter = indexCounter + 1\n\n        }\n        console.log(citationDates)\n\n        var firstDate = citationDates[0]\n        var lastDate = citationDates.slice(-1)[0]\n\n      //add the timeline \n      var timeLine = svg.append('path')\n          //.transition().duration(2000)\n          .attr('d',lineFunction(lineData))\n          .attr('stroke-width',2)\n          .attr('stroke','#333333')\n\n      //add axis labels\n\n      var yearLabelStart = svg.append('g')\n        .attr('transform','translate(' + width*.1 +','+ height*.23 + ')')\n        .append('text')\n          .text(firstDate)\n          .attr('class','year-label')\n\n      var yearLabelEnd = svg.append('g')\n        .attr('transform','translate(' + width*.9 +','+ height*.23 + ')')\n        .append('text')\n          .text(lastDate)\n          .attr('class','year-label')\n        \n        //add circle for each citation  \n        var citationCircles = svg.selectAll('circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',function (d) {\n              if (d.date.length >4)   \n                {return  xPositionScale(d.date.slice(0,4))}\n              else\n                {return xPositionScale(d.date)}\n              \n            })\n            .attr('cy',height*.2)\n            .attr('r',4)\n            .attr('opacity',.5)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)   \n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n      //add a slider\n      var sliderContainer = d3.select('.scroll__graphic').append('div')\n        .attr('class','slider-container')\n\n      //add the selected citation container\n      var citationContainer = d3.select('.scroll__graphic').append('div')\n        .attr('class','citationContainer')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n        \n      var slider = sliderContainer.append('input')\n        .attr('type','range')\n        .attr('min',firstDate)\n        .attr('max',lastDate)\n        .attr('id','rangeSLider')\n        .attr('value',1761)\n        .attr('step',1)\n        .attr('class','slider')\n        .attr('dates',citationDates)\n        .attr('oninput','selectCitation(this.value)')\n        .attr('onstart','selectCitation(this.value)')\n\n\n\n\n\n    \n//---------------------///\n\n    //end of function\n    }).catch(function(error){\n         // handle error   \n      })\n      //end of data read/script\n        \n    }\n\n    function scrollStep6() {\n\n      //bring back all usages\n      d3.selectAll('.usage-examples').classed('active',true)\n\n      d3.select('.slider-container').transition().duration(1000).style('opacity',0)\n      d3.select('.slider-container').remove()\n      d3.select('.citationContainer').transition().duration(1000).style('opacity',0)\n      d3.select('.citationContainer').remove()\n      d3.select('.time-line').transition().duration(1000).style('opacity',0)\n      d3.select('.time-line').remove()\n\n      //add background colors for pos\n      d3.selectAll('#usage1, #usage2')\n        .transition()\n        .duration(1000)\n        .style('background-color','rgba(250, 189, 33, .7)')\n\n      d3.select('#usage3')\n        .transition()\n        .duration(1000)\n        .style('background-color','rgba(219, 119, 44, .7)')\n\n      d3.select('#usage4')\n        .transition()\n        .duration(1000)\n        .style('background-color','rgba(242, 76, 61, .7)')\n\n      d3.selectAll('#usage5, #usage6, #usage7, #usage8')\n        .transition()\n        .duration(1000)\n        .style('background-color','rgba(219, 44, 202, .7)')\n\n      d3.selectAll('#usage9, #usage10')\n        .transition()\n        .duration(1000)\n        .style('background-color','rgba(134, 51, 255, .7)')\n\n      //unstick chart\n      d3.select('.scroll__graphic')\n        .attr('position','relative')\n\n      //activate stack section\n      d3.select('.stack').classed('active',true)\n    \n    }  \n\n    function scrollStep7() {\n\n    }   \n\n\n    var main = d3.select('main')\n    var scrolly = main.select('#scroll');\n    var graphic = scrolly.select('.scroll__graphic');\n    var text = scrolly.select('scroll__text');\n    var step = text.selectAll('.step');\n\n    // initialize the scrollama\n    var scroller = scrollama();\n\n    // generic window resize listener event\n    function handleResize() {\n      // 1. update height of step elements\n      var stepH = Math.floor(window.innerHeight * 0.75);\n      step.style('height', stepH + 'px');\n\n      var graphicHeight = window.innerHeight \n      var graphicMarginTop = (window.innerHeight - graphicHeight) / 2  \n\n      graphic\n        .style('height', graphicHeight + 'px')\n        .style('top', 0 + 'px');\n\n\n      // 3. tell scrollama to update new element dimensions\n      scroller.resize();\n    }\n\n    // scrollama event handlers\n    function handleStepEnter(response) {\n      // response = { element, direction, index }\n\n      // add color to current step only\n      step.classed('is-active', function (d, i) {\n        return i === response.index;\n      })\n      //run current step function\n      scrollSteps[response.index]();\n      console.log('scroll step is '+ response.index)\n\n      // update graphic based on step, run step functions here\n      // graphic.select('.chart').text(response.index + 1);\n    }\n\n    function setupStickyfill() {\n      d3.selectAll('.sticky').each(function () {\n        Stickyfill.add(this);\n      });\n    }\n\n\n    function init() {\n      setupStickyfill();\n\n      // 1. force a resize on load to ensure proper dimensions are sent to scrollama\n      handleResize();\n\n      // 2. setup the scroller passing options\n      //    this will also initialize trigger observations\n      // 3. bind scrollama event handlers (this can be chained like below)\n      scroller.setup({\n        step: '#scroll .scroll__text .step',\n        offset: 0.33,\n        debug: false\n        // once: true,\n      })\n        .onStepEnter(handleStepEnter)\n\n\n      // setup resize event\n      window.addEventListener('resize', handleResize);\n    }\n\n    // kick things off\n    init();\n}\n//end of scrolly function\n\n//-----------------//\n\n//adding charts to stack\n\nfunction buildCitationTimeline(usageData,icebergnumber,overlaynumber) {\n      console.log('running ass line')\n      console.log(usageData)\n\n      //set up variables\n      const margin = { top: 20, right: 20, bottom: 20, left: 20 }\n      const height = window.innerHeight - margin.top - margin.bottom\n      const width = window.innerWidth - margin.left - margin.right\n      var svg = d3.select(overlaynumber)\n        .append('svg')\n        .attr('class','time-line')\n        .attr('width',width)\n        .attr('height',height-margin.bottom)\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      var lineFunction = d3.line()\n        .x(function(d) { return d.x; })\n        .y(function(d) { return d.y; })\n      var lineData = [ { \"x\": width*.1,   \"y\": height*.2},  { \"x\": width*.9,  \"y\": height*.2} ]\n      var colorScale = d3.scaleOrdinal()\n        .domain(['noun','compound','phrase','adjective','suffix','verb','adverb'])\n        .range(['#FABD21','#DB2CCA','#8633FF','#DB772C','#F24C3D','green','gray'])\n\n      //filter data and only do line if more than 1 citation\n      if (usageData.number_of_citations == 1)\n        {\n          var citationData = Array(usageData.citations)\n\n          //add circle for each citation  \n        var citationCircles = svg.selectAll('.citation-circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',width/2)\n            .attr('class','citation-circle')\n            .attr('cy',height*.2)\n            .attr('r',4)\n            .attr('opacity',1)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)   \n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n          if (citationData[0].date.length > 4)\n            {var yearLabelText = citationData[0].date.slice(0,4)}\n          else\n            {var yearLabelText = citationData[0].date}\n           \n\n        var yearLabelStart = svg.append('g')\n          .attr('transform','translate(' + width*.5 +','+ height*.23 + ')')\n          .append('text')\n          .text(yearLabelText)\n          .attr('class','year-label')\n\n          //add the selected citation container\n      var citationContainer = d3.select(overlaynumber).append('div')\n        .attr('class','citationContainer')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n\n\n      var senseContainer = d3.select(overlaynumber).append('div')\n        .attr('class','sense-container')\n        .text(usageData.part_of_speech + \": \" + usageData.definition)\n\n      var wordContainer = d3.select(overlaynumber).append('h1')\n        .attr('class','word-container')\n        .style('color', colorScale(usageData.part_of_speech))\n        .text(usageData.word)\n      } \n      else\n        {\n          var citationData = usageData.citations\n\n          var x \n          var citationCounter = 0\n          for (x of citationData){\n            if (x['@first'] == 'yes')\n              {citationData = citationData.slice(citationCounter,)}\n            citationCounter = citationCounter + 1\n          }\n\n          //grab just the dates\n          var citationDates = citationData.map(function (d) {return d.date})\n          var x\n          var indexCounter = 0\n            //remove extraneous years\n           for (x of citationDates) {\n            console.log(x.length)\n            if (x.length > 4) {\n              var newDate = x.slice(0,4)\n              citationDates[indexCounter] = newDate\n            }\n            else {}\n            indexCounter = indexCounter + 1\n\n          }\n\n          //set up scales\n      var xPositionScale = d3.scaleLinear()\n        .domain([d3.min(citationDates),d3.max(citationDates)])\n        .range([width*.1,width*.9])\n\n      //add the timeline \n      var timeLine = svg.append('path')\n          //.transition().duration(2000)\n          .attr('d',lineFunction(lineData))\n          .attr('stroke-width',2)\n          .attr('stroke','#333333')\n\n      //add axis labels\n\n      var yearLabelStart = svg.append('g')\n        .attr('transform','translate(' + width*.1 +','+ height*.23 + ')')\n        .append('text')\n          .text(d3.min(citationDates))\n          .attr('class','year-label')\n\n      var yearLabelEnd = svg.append('g')\n        .attr('transform','translate(' + width*.9 +','+ height*.23 + ')')\n        .append('text')\n          .text(d3.max(citationDates))\n          .attr('class','year-label')\n        \n        //add circle for each citation  \n        var citationCircles = svg.selectAll('.citation-circle')\n            .data(citationData)\n            .enter().append('circle')\n            .attr('cx',function (d) {\n              return xPositionScale(d.date)\n            })\n            .attr('class','citation-circle')\n            .attr('cy',height*.2)\n            .attr('r',4)\n            .attr('opacity',.5)\n            .attr('text', function (d){\n              return d['#text']\n            })\n            .attr('fill','#F24C3D')\n            .attr('id', function (d) {\n\n              if (d.date.length >4)   \n                {return 'date' + d.date.slice(0,4)}\n              else\n                {return 'date' + d.date}\n            })\n\n      //add a slider\n      var sliderContainer = d3.select(overlaynumber).append('div')\n        .attr('class','slider-container')\n        \n\n      var slider = sliderContainer.append('input')\n        .attr('type','range')\n        .attr('min',d3.min(citationDates))\n        .attr('max',d3.max(citationDates))\n        .attr('id','rangeSlider')\n        .attr('value',d3.min(citationDates))\n        .attr('step',1)\n        .attr('class','slider')\n        .attr('dates',citationDates)\n        .attr('oninput','selectCitation(this.value)')\n        .attr('onstart','selectCitation(this.value)')\n\n\n      //add the selected citation container\n      var citationContainer = d3.select(overlaynumber).append('div')\n        .attr('class','citationContainer')\n        .text('(' + citationData[0].date + ') ' + citationData[0]['#text'])\n\n\n      var senseContainer = d3.select(overlaynumber).append('div')\n        .attr('class','sense-container')\n        .text(usageData.part_of_speech + \": \" + usageData.definition)\n\n      var wordContainer = d3.select(overlaynumber).append('h1')\n        .attr('class','word-container')\n        .style('color', colorScale(usageData.part_of_speech))\n        .text(usageData.word)\n    \n//end of if/else\n      }\n\n//end of function\n}\n\nfunction buildIcebergChart(filename,icebergnumber,overlaynumber) {\n      //time to make some charts\n\n      //define the data, run function\n    d3.json(filename).then(\n    //begin function\n    function icebergChart(datapoints) {\n      console.log('running ass chart')\n      console.log(datapoints)\n      var citationsLengths = datapoints.map(function (d) {return d.number_of_citations})\n      console.log(datapoints.length)\n\n      //set up variables\n      const margin = { top: 20, right: 20, bottom: 20, left: 20 }\n      const height = window.innerHeight*2 - margin.top - margin.bottom\n      const width = window.innerWidth - margin.left - margin.right\n      var svg = d3.select(icebergnumber)\n        .append('svg')\n        .attr('width',width)\n        .attr('height',height*2)\n        .attr('class','iceberg')\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n      //set up scales\n      var colorScale = d3.scaleOrdinal()\n        .domain(['noun','compound','phrase','adjective','suffix','verb','adverb'])\n        .range(['#FABD21','#DB2CCA','#8633FF','#DB772C','#F24C3D','green','gray'])\n      var yPositionScale = d3.scaleLinear()\n        .domain([d3.max(citationsLengths),d3.min(citationsLengths)])\n        .range([0+margin.bottom,height-margin.top])\n        .clamp(true)\n\n      console.log('still in business')\n\n\n      //run force simulation\n      var simulation = d3.forceSimulation(datapoints)\n        .force(\"y\", d3.forceY(function(d) { return yPositionScale(d.number_of_citations); }).strength(.9))\n        .force(\"x\", d3.forceX(function(d) { return width/2; }).strength(.1))\n        .force(\"collide\", d3.forceCollide().radius(function(d){ return 20 }))\n        .force(\"center\", d3.forceCenter(width/2, height/2))\n        .force(\"manyBody\", d3.forceManyBody().strength(-60))\n        \n      // simulation.start();\n      for (var i = 0; i < 600; ++i) simulation.tick();\n      simulation.stop();\n\n      console.log('still going')\n\n      //append circle groups to svg\n      var circleGroups = svg.selectAll('g')\n        .data(datapoints)\n        .enter().append('g')\n        .attr(\"x\", function(d) { return d.x} )\n        .attr(\"y\", function(d) { return d.y} )\n\n      console.log('should be g')\n\n      //add in circles for each usage\n      // var usageCircles = circleGroups.append('circle')\n      //   .attr('fill', function (d) {\n      //     return colorScale(d.part_of_speech)\n      //   })\n      //   .attr('r', 20)\n      //   .attr('cy', function (d) {\n      //     return d3.select(this.parentNode).attr('y')\n      //   })\n      //   .attr('cx', function (d) {\n      //     return d3.select(this.parentNode).attr('x')\n      //   })\n      //   .attr('stroke','#333333')\n      //   .attr('opacity', .8)\n      //   .attr('id', function(d){ return 'pos' + d.part_of_speech })\n      //   .on('mouseover', function(d, i) {\n      //     var currentState = this\n      //       d3.select(this).style('opacity', 1);\n      //   })\n      //   .on('mouseout', function(d, i) {\n      //     var currentState = this\n      //       d3.select(this).style('opacity', .8);\n      //   })\n      //   .on('click', function (d,i) {\n      //     console.log('clicked')\n      //     var overlay = d3.select(overlaynumber)\n      //       .classed('active',true)\n      //       .on('click', d3.select(this).classed('active',false))\n      //     var usageData = d3.select(this)['_groups'][0][0]['__data__']\n      //     buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n      //   })\n\n      //add in circles for each usage\n      // var usageCircles = circleGroups.append('rect')\n      //   .attr('fill', function (d) {\n      //     return colorScale(d.part_of_speech)\n      //   })\n      //   .attr('width', 40)\n      //   .attr('height',20)\n      //   .attr('y', function (d) {\n      //     return d3.select(this.parentNode).attr('y')\n      //   })\n      //   .attr('x', function (d) {\n      //     return d3.select(this.parentNode).attr('x')\n      //   })\n      //   .attr('stroke','#333333')\n      //   .attr('opacity', .8)\n      //   .attr('id', function(d){ return 'pos' + d.part_of_speech })\n      //   .on('mouseover', function(d, i) {\n      //     var currentState = this\n      //       d3.select(this).style('opacity', 1);\n      //   })\n      //   .on('mouseout', function(d, i) {\n      //     var currentState = this\n      //       d3.select(this).style('opacity', .8);\n      //   })\n      //   .on('click', function (d,i) {\n      //     console.log('clicked')\n      //     var overlay = d3.select(overlaynumber)\n      //       .classed('active',true)\n      //       .on('click', d3.select(this).classed('active',false))\n      //     var usageData = d3.select(this)['_groups'][0][0]['__data__']\n      //     buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n      //   })\n\n      //add in circles for each usage\n      var usageTexts = circleGroups.append('text')\n        .style('background-color', function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .style('font-size', 24)\n        .attr('y', function (d) {\n          return d3.select(this.parentNode).attr('y')\n        })\n        .attr('x', function (d) {\n          return d3.select(this.parentNode).attr('x')\n        })\n        .attr('stroke',function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .attr('fill',function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .attr('opacity', .8)\n        .attr('id', function(d){ return 'pos' + d.part_of_speech })\n        .text(function (d) {\n          return d.word\n        })\n        .on('mouseover', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', 1);\n        })\n        .on('mouseout', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', .8);\n        })\n        .on('click', function (d,i) {\n          console.log('clicked')\n          var overlay = d3.select(overlaynumber)\n            .classed('active',true)\n            .on('click', d3.select(this).classed('active',false))\n          var usageData = d3.select(this)['_groups'][0][0]['__data__']\n          buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n        })\n\n        //add in circles for each usage\n      var usageTexts = circleGroups.append('text')\n        .style('background-color', function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .style('font-size', 24)\n        .attr('y', function (d) {\n          return d3.select(this.parentNode).attr('y')\n        })\n        .attr('x', function (d) {\n          return d3.select(this.parentNode).attr('x')\n        })\n        .attr('stroke',function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .attr('fill',function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .attr('opacity', .8)\n        .attr('id', function(d){ return 'pos' + d.part_of_speech })\n        .text(function (d) {\n          return d.word\n        })\n        .on('mouseover', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', 1);\n        })\n        .on('mouseout', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', .8);\n        })\n        .on('click', function (d,i) {\n          console.log('clicked')\n          var overlay = d3.select(overlaynumber)\n            .classed('active',true)\n            .on('click', d3.select(this).classed('active',false))\n          var usageData = d3.select(this)['_groups'][0][0]['__data__']\n          buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n        })\n\n      // //add in labels\n      // var side = 2 * 4 * Math.cos(Math.PI / 4)\n      // var dx = 4 - side / 2\n    \n      // var wordTextLabels = circleGroups.append('foreignObject')\n      //   .attr(\"width\", side)\n      //   .attr(\"height\", side)\n      //   // .attr('transform', 'translate(' + [-dx*2, -dx*2] + ')')\n      //   .attr('y', function (d) {\n      //     return d3.select(this.parentNode).attr('y')\n      //   })\n      //   .attr('x', function (d) {\n      //     return d3.select(this.parentNode).attr('x')\n      //   })\n      //   .append(\"xhtml:span\")\n      //   .attr('class','usage-labels')\n      //   .html(function (d) { return  d.word })\n\n    //end of function\n    }).catch(function(error){\n         // handle error   \n      })\n      //end of data read/script\n    }\n\n//---------------------///\n\nfunction buildIcebergTextChart(filename,icebergnumber,overlaynumber) {\n      //time to make some charts\n\n      //define the data, run function\n    d3.json(filename).then(\n    //begin function\n    function icebergChart(datapoints) {\n      var citationsLengths = datapoints.map(function (d) {return d.number_of_citations})\n      console.log(datapoints.length)\n\n\n      //set up scales\n      var colorScale = d3.scaleOrdinal()\n        .domain(['noun','compound','phrase','adjective','suffix','verb','adverb'])\n        .range(['#FABD21','#DB2CCA','#8633FF','#DB772C','#F24C3D','green','gray'])\n\n\n      var container = d3.select(icebergnumber)\n\n      //append circle groups to svg\n      var spans = container.selectAll('span')\n        .data(datapoints)\n        .enter().append('span')\n        .sort(function(x, y){\n   return y.number_of_citations - x.number_of_citations\n})\n        .attr('class','iceberg-text')\n        .attr('opacity',.8)\n        .style('color', function (d) {\n          return colorScale(d.part_of_speech)\n        })\n        .text(function(d) { \n          return d.word + '  ' \n        })\n        .on('mouseover', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', 1);\n        })\n        .on('mouseout', function(d, i) {\n          var currentState = this\n            d3.select(this).style('opacity', .8);\n        })\n        .on('click', function (d,i) {\n          console.log('clicked')\n          var overlay = d3.select(overlaynumber)\n            .classed('active',true)\n            .on('click', d3.select(this).classed('active',false))\n          var usageData = d3.select(this)['_groups'][0][0]['__data__']\n          buildCitationTimeline(usageData,icebergnumber,overlaynumber)\n        })\n\n       console.log(d3.select('#iceberg1').style('height')) \n\n      var leftShape = d3.select('#left-shape1')\n        .style('height','101em')\n        // .style('height','2000px')\n      var rightShape = d3.select('#right-shape1')\n        .style('height','101em')\n\n    //end of function\n    }).catch(function(error){\n         // handle error   \n      })\n      //end of data read/script\n    }\n\n//run functions\nfunction init() {\n  console.log('Make something awesome!');\n  //Run the stepper\n  setupStepper()\n  //Run the scroller\n  setupScroller()\n  //Build charts\n  buildIcebergTextChart('assets/data/ass_long_data.json','#iceberg1','#overlay1')\n  buildIcebergTextChart('assets/data/fuck_long_data.json','#iceberg2','#overlay2')\n  buildIcebergTextChart('assets/data/red_long_data.json','#iceberg3','#overlay3')\n  buildIcebergTextChart('assets/data/shit_long_data.json','#iceberg4','#overlay4')\n}\n\n\n\nexport default { init, resize };\n\n","const fallbackData = [\n  {\n    image: '2018_02_stand-up',\n    url: '2018/02/stand-up',\n    hed: 'The Structure of Stand-Up Comedy',\n  },\n  {\n    image: '2018_04_birthday-paradox',\n    url: '2018/04/birthday-paradox',\n    hed: 'The Birthday Paradox Experiment',\n  },\n  {\n    image: '2018_11_boy-bands',\n    url: '2018/11/boy-bands',\n    hed: 'Internet Boy Band Database',\n  },\n  {\n    image: '2018_08_pockets',\n    url: '2018/08/pockets',\n    hed: 'Womens Pockets are Inferior',\n  },\n];\n\nlet storyData = null;\n\nfunction loadJS(src, cb) {\n  const ref = document.getElementsByTagName('script')[0];\n  const script = document.createElement('script');\n  script.src = src;\n  script.async = true;\n  ref.parentNode.insertBefore(script, ref);\n\n  if (cb && typeof cb === 'function') {\n    script.onload = cb;\n  }\n\n  return script;\n}\n\nfunction loadStories(cb) {\n  const request = new XMLHttpRequest();\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n  request.open('GET', url, true);\n\n  request.onload = () => {\n    if (request.status >= 200 && request.status < 400) {\n      const data = JSON.parse(request.responseText);\n      cb(data);\n    } else cb(fallbackData);\n  };\n\n  request.onerror = () => cb(fallbackData);\n\n  request.send();\n}\n\nfunction createLink(d) {\n  return `\n\t<a class='footer-recirc__article' href='https://pudding.cool/${\n    d.url\n  }' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${\n      d.image\n    }.jpg' alt='${d.hed}'>\n\t\t<p class='article__headline'>${d.hed}</p>\n\t</a>\n\t`;\n}\n\nfunction recircHTML() {\n  const url = window.location.href;\n  const html = storyData\n    .filter(d => !url.includes(d.url))\n    .slice(0, 4)\n    .map(createLink)\n    .join('');\n\n  d3.select('.pudding-footer .footer-recirc__articles').html(html);\n}\n\nfunction setupSocialJS() {\n  // facebook\n  (function(d, s, id) {\n    let js;\n\n    const fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7';\n    fjs.parentNode.insertBefore(js, fjs);\n  })(document, 'script', 'facebook-jssdk');\n\n  loadJS('https://platform.twitter.com/widgets.js');\n}\n\nfunction init() {\n  loadStories(data => {\n    storyData = data;\n\n    recircHTML();\n    setupSocialJS();\n  });\n}\n\nexport default { init };\n","/* global d3 */\nimport debounce from 'lodash.debounce';\nimport isMobile from './utils/is-mobile';\nimport graphic from './graphic';\nimport footer from './footer';\n\nconst $body = d3.select('body');\nlet previousWidth = 0;\n\nfunction resize() {\n  // only do resize on width changes, not height\n  // (remove the conditional if you want to trigger on height change)\n  const width = $body.node().offsetWidth;\n  if (previousWidth !== width) {\n    previousWidth = width;\n    graphic.resize();\n  }\n}\n\nfunction setupStickyHeader() {\n  const $header = $body.select('header');\n  if ($header.classed('is-sticky')) {\n    const $menu = $body.select('.header__menu');\n    const $toggle = $body.select('.header__toggle');\n    $toggle.on('click', () => {\n      const visible = $menu.classed('is-visible');\n      $menu.classed('is-visible', !visible);\n      $toggle.classed('is-visible', !visible);\n    });\n  }\n}\n\nfunction init() {\n  // add mobile class to body tag\n  $body.classed('is-mobile', isMobile.any());\n  // setup resize event\n  window.addEventListener('resize', debounce(resize, 150));\n  // setup sticky header menu\n  // setupStickyHeader();\n  // kick off graphic code\n  graphic.init();\n  // load footer stories\n  footer.init();\n}\n\ninit();\n"]}